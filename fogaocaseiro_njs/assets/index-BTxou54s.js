import{a as l,j as e}from"./react-BWFZKfll.js";import{c as R}from"./react-dom-B0g7UFVY.js";import{t as F}from"./html-to-image-B5wfgAHf.js";import"./scheduler-SPyfQU6S.js";(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))u(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&u(i)}).observe(document,{childList:!0,subtree:!0});function c(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function u(s){if(s.ep)return;s.ep=!0;const o=c(s);fetch(s.href,o)}})();const P="/fogaocaseiro_njs/assets/line_red-DFBQ8Qtj.svg",S=()=>{const[f,d]=l.useState([]),[c,u]=l.useState(null),[s,o]=l.useState(!0),[i,m]=l.useState(null),[g,b]=l.useState(null),a=l.useRef(null),h=4;l.useEffect(()=>{(async()=>{o(!0),m(null);try{const x=await fetch("https://script.google.com/macros/s/AKfycbwPM8rduLw2nFFdrvhatroUmZ8jCMbXrh54cOGHBpjy7KFgFbMmU4-pDrzCQ1ZnYms-/exec");if(!x.ok)throw new Error("Falha ao carregar dados");const L=(await x.json()).filter(I=>I.ativo==="sim");d(L)}catch(r){console.error("Erro ao buscar dados:",r),m(r.message)}finally{o(!1)}})()},[]);const y=f.reduce((t,r)=>{const n=r.tipo;return t[n]||(t[n]=[]),t[n].push(r),t},{}),j=Object.entries(y).flatMap(([t,r])=>{const n=Math.ceil(r.length/h);return Array.from({length:n}).map((x,p)=>({tipo:t,page:p,label:n>1?`${t} ${p+1}`:t}))}),w=c?f.filter(t=>t.tipo===c.tipo):[],N=c?w.slice(c.page*h,(c.page+1)*h):[],v=async()=>{if(a.current)try{a.current.classList.remove("hidden"),a.current.style.position="fixed",a.current.style.top="0",a.current.style.left="0",a.current.style.zIndex="1000";const t=await F(a.current,{quality:1,backgroundColor:"#ffffff",pixelRatio:2});if(t){const r=URL.createObjectURL(t);b(r)}a.current.classList.add("hidden"),a.current.style.position="",a.current.style.top="",a.current.style.left="",a.current.style.zIndex=""}catch(t){console.error("Erro ao gerar imagem:",t),m("Falha ao gerar imagem")}},E=(t,r)=>{u({tipo:t,page:r}),setTimeout(()=>{v()},0)};return s?e.jsx("div",{className:"h-screen flex items-center justify-center bg-gray-50",children:e.jsx("p",{className:"text-gray-600",children:"Carregando..."})}):i?e.jsx("div",{className:"h-screen flex items-center justify-center bg-gray-100 p-4",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md max-w-md text-center",children:[e.jsx("h2",{className:"text-xl font-bold text-[#dd3c39] mb-2",children:"Erro"}),e.jsx("p",{className:"text-gray-600 mb-4",children:i}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-[#292929] text-white rounded hover:bg-black",children:"Recarregar"})]})}):e.jsxs("div",{className:"h-[100svh] w-full grid grid-rows-[auto_1fr] gap-1 bg-gray-100 p-2",children:[e.jsx("section",{className:"w-full flex items-center justify-center overflow-hidden",children:g&&e.jsx("img",{src:g,alt:"Preview",className:"h-full w-auto object-contain max-h-full max-w-full"})}),e.jsxs("section",{className:"bg-white rounded-lg border p-3 w-full max-w-md mx-auto",children:[e.jsx("h2",{className:"text-lg font-bold mb-2 text-center",children:"Escolha um tipo"}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:j.map(({tipo:t,page:r,label:n})=>e.jsx("button",{onClick:()=>E(t,r),className:`px-3 py-1 border rounded-full text-sm transition-colors ${c?.tipo===t&&c?.page===r?"bg-[#292929] text-white":"bg-white text-[#292929] hover:bg-gray-100"}`,children:n},`${t}-${r}`))})]}),e.jsxs("div",{ref:a,className:"hidden bg-white w-[360px] h-[640px] border-gray-300 text-black overflow-hidden",children:[e.jsxs("div",{className:"bg-[#dd3c39] p-3 flex justify-between items-center",children:[e.jsx("img",{src:P,alt:"logo",className:"h-8 object-contain"}),e.jsxs("ul",{className:"text-xl text-white text-right space-y-0.5",children:[e.jsx("li",{children:"(21) 97661-4212"}),e.jsx("li",{children:"@fogaocaseirooficial"})]})]}),e.jsx("h3",{className:"text-xl text-center font-bold border- border-gray-500 text-[#292929]",children:c?`${c.tipo} ${c.page+1}`:"Tipo"}),e.jsx("ul",{className:"p-3 space-y-2 overflow-y-auto h-[calc(100%-96px)] overflow-hidden",children:N.map((t,r)=>e.jsxs("li",{className:"p-4 bg-white rounded-xl border border-gray-200 shadow-md hover:shadow-lg transition-shadow duration-200 mb-4",children:[e.jsx("p",{className:"text-gray-800 font-medium mb-2",children:t.descricao}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-500",children:[e.jsx("span",{className:"italic",children:t.obs}),e.jsxs("span",{className:"text-green-600 font-semibold",children:["R$",Number(t.preco).toFixed(2).replace(".",",")]})]})]},r))})]})]})};R.createRoot(document.getElementById("root")).render(e.jsx(l.StrictMode,{children:e.jsx(S,{})}));
